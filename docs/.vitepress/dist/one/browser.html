<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器 | 前端百题斩</title>
    <meta name="description" content="精选前端面试题">
    <link rel="stylesheet" href="/assets/style.b46ed864.css">
    <link rel="modulepreload" href="/assets/app.8f85f826.js">
    <link rel="modulepreload" href="/assets/one_browser.md.93436061.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-17e95b6a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-62c5f7de></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-62c5f7de> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-17e95b6a data-v-4a8d1de6><div class="VPNavBar" data-v-4a8d1de6 data-v-3e963690><div class="container" data-v-3e963690><div class="VPNavBarTitle" data-v-3e963690 data-v-6dc121e4><a class="title" href="/" data-v-6dc121e4><!----><!--[-->前端百题斩<!--]--></a></div><div class="content" data-v-3e963690><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3e963690 data-v-6e7f8068><span id="main-nav-aria-label" class="visually-hidden" data-v-6e7f8068>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6e7f8068 data-v-09ad54ca><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-09ad54ca><span class="text" data-v-09ad54ca><!----> 基础 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-09ad54ca><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-09ad54ca><div class="VPMenu" data-v-09ad54ca data-v-60d29ca0><div class="items" data-v-60d29ca0><!--[--><!--[--><div class="VPMenuLink" data-v-60d29ca0 data-v-e49249f8><a class="VPLink link" href="/one/js.html" data-v-e49249f8 data-v-52f97278><!--[-->JavaScript<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-60d29ca0 data-v-e49249f8><a class="VPLink link" href="/one/css.html" data-v-e49249f8 data-v-52f97278><!--[-->CSS<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-60d29ca0 data-v-e49249f8><a class="VPLink link active" href="/one/browser.html" data-v-e49249f8 data-v-52f97278><!--[-->浏览器<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6e7f8068 data-v-09ad54ca><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-09ad54ca><span class="text" data-v-09ad54ca><!----> 综合 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-09ad54ca><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-09ad54ca><div class="VPMenu" data-v-09ad54ca data-v-60d29ca0><div class="items" data-v-60d29ca0><!--[--><!--[--><div class="VPMenuLink" data-v-60d29ca0 data-v-e49249f8><a class="VPLink link" href="/two/vue.html" data-v-e49249f8 data-v-52f97278><!--[-->vue<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-60d29ca0 data-v-e49249f8><a class="VPLink link" href="/two/webpack.html" data-v-e49249f8 data-v-52f97278><!--[-->webpack<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-60d29ca0 data-v-e49249f8><a class="VPLink link" href="/two/other.html" data-v-e49249f8 data-v-52f97278><!--[-->其他<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3e963690 data-v-6f8baba6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-6f8baba6 data-v-cc28dc48 data-v-acaa328a><span class="check" data-v-acaa328a><span class="icon" data-v-acaa328a><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-cc28dc48><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-cc28dc48><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-3e963690 data-v-6311b37e data-v-09ad54ca><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-09ad54ca><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-09ad54ca><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-09ad54ca><div class="VPMenu" data-v-09ad54ca data-v-60d29ca0><!----><!--[--><!--[--><!----><div class="group" data-v-6311b37e><div class="item appearance" data-v-6311b37e><p class="label" data-v-6311b37e>Appearance</p><div class="appearance-action" data-v-6311b37e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-6311b37e data-v-cc28dc48 data-v-acaa328a><span class="check" data-v-acaa328a><span class="icon" data-v-acaa328a><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-cc28dc48><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-cc28dc48><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3e963690 data-v-19f82b18><span class="container" data-v-19f82b18><span class="top" data-v-19f82b18></span><span class="middle" data-v-19f82b18></span><span class="bottom" data-v-19f82b18></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-17e95b6a data-v-51c4237e><div class="VPDoc" data-v-51c4237e data-v-33f3cc82><div class="container" data-v-33f3cc82><div class="aside" data-v-33f3cc82><div class="aside-curtain" data-v-33f3cc82></div><div class="aside-container" data-v-33f3cc82><div class="aside-content" data-v-33f3cc82><div class="VPDocAside" data-v-33f3cc82 data-v-a015c1a8><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-a015c1a8 data-v-034b01a6><div class="content" data-v-034b01a6><div class="outline-marker" data-v-034b01a6></div><div class="outline-title" data-v-034b01a6>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-034b01a6><span class="visually-hidden" id="doc-outline-aria-label" data-v-034b01a6> Table of Contents for current page </span><ul class="root" data-v-034b01a6><!--[--><li style="" data-v-034b01a6><a class="outline-link" href="#html-dom" data-v-034b01a6>HTML/DOM</a><ul data-v-034b01a6><!--[--><li style="" data-v-034b01a6><a class="outline-link nested" href="#offsetheight-scrollheight-clientheight-区别" data-v-034b01a6>offsetHeight-scrollHeight-clientHeight-区别</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#property-和-attribute区别" data-v-034b01a6>property 和 attribute区别</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#async-和-defer-区别" data-v-034b01a6>async 和 defer 区别</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#href-和-src-区别" data-v-034b01a6>href 和 src 区别</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#css会阻塞渲染吗" data-v-034b01a6>CSS会阻塞渲染吗</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#html5-新特性" data-v-034b01a6>HTML5 新特性</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#token会劫持的问题" data-v-034b01a6>token会劫持的问题</a></li><!--]--></ul></li><li style="" data-v-034b01a6><a class="outline-link" href="#网络-浏览器" data-v-034b01a6>网络/浏览器</a><ul data-v-034b01a6><!--[--><li style="" data-v-034b01a6><a class="outline-link nested" href="#tcp和udp区别" data-v-034b01a6>TCP和UDP区别</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#http-1-1长连接-和-http-2-0多路复用" data-v-034b01a6>HTTP/1.1长连接 和 HTTP/2.0多路复用?</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#https" data-v-034b01a6>HTTPS</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#长连接-长轮询-短轮询-websocket" data-v-034b01a6>长连接/长轮询/短轮询/websocket</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#dns解析" data-v-034b01a6>DNS解析</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#浏览器安全" data-v-034b01a6>浏览器安全</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#浏览器存储" data-v-034b01a6>浏览器存储</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#跨域问题" data-v-034b01a6>跨域问题</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#http状态码" data-v-034b01a6>HTTP状态码</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#缓存" data-v-034b01a6>缓存</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#事件循环" data-v-034b01a6>事件循环</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#浏览器进程" data-v-034b01a6>浏览器进程</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#从输入url到显示页面" data-v-034b01a6>从输入URL到显示页面</a></li><li style="" data-v-034b01a6><a class="outline-link nested" href="#raf-ric" data-v-034b01a6>rAF/rIC</a></li><!--]--></ul></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-a015c1a8></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-33f3cc82><div class="content-container" data-v-33f3cc82><!--[--><!--]--><main class="main" data-v-33f3cc82><div style="position:relative;" class="vp-doc _one_browser" data-v-33f3cc82><div><h1 id="浏览器" tabindex="-1">浏览器 <a class="header-anchor" href="#浏览器" aria-hidden="true">#</a></h1><h2 id="html-dom" tabindex="-1">HTML/DOM <a class="header-anchor" href="#html-dom" aria-hidden="true">#</a></h2><h3 id="offsetheight-scrollheight-clientheight-区别" tabindex="-1">offsetHeight-scrollHeight-clientHeight-区别 <a class="header-anchor" href="#offsetheight-scrollheight-clientheight-区别" aria-hidden="true">#</a></h3><ul><li>style.width的返回值是字符串，并且带有单位</li><li>offsetHeight/offsetWidth ：border + padding + content</li><li>clientHeight/clientWidth ：padding + content</li><li>scrollHeight/scrollWidth ：padding + 实际内容的尺寸</li><li>scrollTop/scrollLeft : DOM 内部元素滚动的距离</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/338495/1620556246492-47ff64d3-9e0b-4531-a259-77eced186322.png?x-oss-process=image%2Fresize%2Cw_937%2Climit_0#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=url&amp;id=wnd35&amp;margin=%5Bobject%20Object%5D&amp;originHeight=424&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><ul><li>window.innerHeight：<strong>可视区域高度</strong></li><li>document.documentElement.clientHeight：**可视区域高度，**不包含滚动条</li><li>document.documentElement.scrollHeight：html元素高度</li><li>document.body.clientHeight：body元素高度</li></ul><h3 id="property-和-attribute区别" tabindex="-1">property 和 attribute区别 <a class="header-anchor" href="#property-和-attribute区别" aria-hidden="true">#</a></h3><ul><li>property：每个DOM节点都是 JS 对象，操作 property 是 JS 范畴的</li><li>attribute：是DOM上的属性</li></ul><p>两者之间的区别是：</p><ul><li>自定义的 property 与 attribute 不同步,不相等</li><li>非自定义的 DOM property 与 attributes 是有条件同步的（如 value不会同步）</li></ul><h3 id="async-和-defer-区别" tabindex="-1">async 和 defer 区别 <a class="header-anchor" href="#async-和-defer-区别" aria-hidden="true">#</a></h3><ul><li>两个都是异步加载 JS 脚本，不阻塞 html 解析</li><li>defer 是先加载，等到dom解析完，在DOMContentLoaded事件之前执行脚本</li><li>async 是加载完立即执行</li><li>type=&quot;module&quot; 等同于defer</li></ul><h3 id="href-和-src-区别" tabindex="-1">href 和 src 区别 <a class="header-anchor" href="#href-和-src-区别" aria-hidden="true">#</a></h3><ul><li>href 用于建立当前页面与引用资源之间的关系（链接）如 a / link，</li><li>src 则会替换当前标签，如 img / script/ iframe</li></ul><h3 id="css会阻塞渲染吗" tabindex="-1">CSS会阻塞渲染吗 <a class="header-anchor" href="#css会阻塞渲染吗" aria-hidden="true">#</a></h3><ul><li>CSS 不会阻塞 DOM 解析（link在head中）</li><li>CSS 会阻塞 DOM 树的渲染（阻塞render tree的形成）</li><li>会阻塞后面的 JS 的执行（JS可以更改DOM样式）</li></ul><h3 id="html5-新特性" tabindex="-1">HTML5 新特性 <a class="header-anchor" href="#html5-新特性" aria-hidden="true">#</a></h3><ul><li>语义化标签</li><li>canvas/svg</li><li>localStorage / sessionStorage</li><li>websocket</li><li>history api @路由 <ul><li>puhState / replaceState方法</li><li>popstate事件，上述两个方法不会触发</li></ul></li><li>媒体/表单/定位相关</li></ul><h3 id="token会劫持的问题" tabindex="-1">token会劫持的问题 <a class="header-anchor" href="#token会劫持的问题" aria-hidden="true">#</a></h3><ul><li><p>token 是为了防止 csrf 攻击的，因为浏览器会自动携带同域 Cookie 发送请求。</p></li><li><p>CSRF 的过程：</p><ul><li>用户登录了 <code>a.com</code> ，有了 cookie</li><li>黑客引诱用户访问 <code>b.com</code> 网页，偷偷让用户访问了 <code>a.com/api/xxx</code>（干某件事）</li><li><code>a.com</code> api 接口收到请求 cookie ，误以为是真实用户的请求，就受理了</li></ul></li><li></li></ul><h2 id="网络-浏览器" tabindex="-1">网络/浏览器 <a class="header-anchor" href="#网络-浏览器" aria-hidden="true">#</a></h2><h3 id="tcp和udp区别" tabindex="-1">TCP和UDP区别 <a class="header-anchor" href="#tcp和udp区别" aria-hidden="true">#</a></h3><ul><li>TCP是面向字节流的(可拆分/合并)，UDP是面向报文的</li><li>TCP面向连接，UDP无连接</li><li>TCP只能一对一通信，UDP支持一对一，一对多，多对一，多对多</li><li>TCP可靠传输，使用流量控制和拥塞控制，UDP不可靠</li><li>TCP头部开销大（20-60字节），UDP头部开销小（8字节）</li></ul><h3 id="http-1-1长连接-和-http-2-0多路复用" tabindex="-1">HTTP/1.1长连接 和 HTTP/2.0多路复用? <a class="header-anchor" href="#http-1-1长连接-和-http-2-0多路复用" aria-hidden="true">#</a></h3><ul><li>HTTP/1.1：同⼀时间⼀个TCP连接只能处理⼀个请求, 采⽤⼀问⼀答的形式, 上⼀个请求响应后才能处理下⼀个请求. 由于浏览器最⼤TCP连接数的限制, 所以有了最⼤并发请求数的限制.</li><li>HTTP/2.0：同域名下所有通信都在单个连接上完成，消除了因多个 TCP 连接⽽带来的延时和内存消耗。单个连接上可以并⾏交错的请求和响应，之间互不干扰。</li></ul><p>那为什么HTTP/1.1不能实现多路复⽤?</p><ul><li>HTTP/2是基于⼆进制“帧”的协议，HTTP/1.1是基于(报文)“⽂本分割”解析的协议。</li><li>HTTP1.1的报⽂结构中, 服务器需要不断的读⼊字节，直到遇到换⾏符, 或者说⼀个空⽩⾏. 处理顺序是串⾏的, ⼀个请求和⼀个响应需要通过⼀问⼀答的形式才能对应起来。</li><li>HTTP2.0中，有两个⾮常重要的概念，分别是帧（frame）和流（stream）。帧代表着最⼩的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。</li><li>多路复⽤，就是在⼀个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极⼤的提⾼传输性能。</li></ul><h3 id="https" tabindex="-1">HTTPS <a class="header-anchor" href="#https" aria-hidden="true">#</a></h3><p>HTTS 其实就是 HTTP+TLS 的传输方式，TLS 叫传输层安全，之前叫 SSL（安全套接层）。</p><p>因为 HTTP 属于明文传输，可以被截取到。那么就需要对传输报文进行加密，加密方式有两种：非对称和对称。对称就是同一个密钥进行加密解密，非对称就是有一组公私密钥，可以互相加解密。</p><p>那么 TLS 是怎么做的呢？</p><p>因为非对称加密的效率不高，对 http 报文一般采用对称加密，然后通过非对称加密传输这个会话密钥。</p><p>比如客户端生成一个会话密钥通过一个公钥加密，服务端通过私钥解密获得会话密钥，就可以安全地传输报文了。</p><p>但是这个公钥不能安全地传输到客户端手里，即使加密也需要对应的密钥进行传输，现在的通过 CA 机构 解决这个密钥的信任问题。</p><p>服务端向 CA 机构申请一个证书，这个证书，就是用 CA 机构的私钥 加密过的 网站的公钥。</p><p>然后客户端请求得到这个证书，通过预装在客户端的 CA 机构的公钥 进行解密和验证签名，得到这个网站的公钥。</p><p>简单的讲，客户端就可以生成一个会话密钥通过公钥加密传输给服务端，服务端通过对应的私钥解密后就共享了这个会话密钥。</p><p>但是，真实情况不是这个简单流程(RSA)，有密钥交换算法，比如 ECDHE，在请求返回证书的过程，服务端和客户端会分别交互两个随机数，然后自个通过协商好的算法参数生成第三个随机数，再通过这个三个随机数生成会话密钥，这个密钥是不需要传输的，两边都知道，之后就可以加密传输了。</p><h3 id="长连接-长轮询-短轮询-websocket" tabindex="-1">长连接/长轮询/短轮询/websocket <a class="header-anchor" href="#长连接-长轮询-短轮询-websocket" aria-hidden="true">#</a></h3><ul><li>长连接：<code>Connection：keep-alive</code></li><li>长轮询：服务端将请求挂起一定的时间再返回（微信二维码）</li><li>短轮询：客户端每隔一段时间发送请求</li><li>websocket：全双工的协议，可以相互收发消息。</li></ul><h3 id="dns解析" tabindex="-1">DNS解析 <a class="header-anchor" href="#dns解析" aria-hidden="true">#</a></h3><p><strong>DNS（Domain Name System，域名系统）是一个将域名和 IP 地址相互映射的分布式服务</strong></p><p>缓存：浏览器-操作系统-路由器-本地域名服务器</p><p>1.客户端发送请求给本地域名服务器，如果没有继续（递归）</p><p>2.本地域名服务器，向根域名服务器，返回顶级域名服务器地址，然后请求拿到权威域名服务器，最后请求拿到IP返回给客户端（迭代）</p><p>一般我们向本地 DNS 服务器发送请求的方式就是递归查询，因为我们只需要发出一次请求，然后本地 DNS 服务器返回给我 们最终的请求结果。而本地 DNS 服务器向其他域名服务器请求的过程是迭代查询的过程，因为每一次域名服务器只返回单次 查询的结果，下一级的查询由本地 DNS 服务器自己进行。</p><h3 id="浏览器安全" tabindex="-1">浏览器安全 <a class="header-anchor" href="#浏览器安全" aria-hidden="true">#</a></h3><p><strong>csrf：跨站请求伪造(Cross—Site Request Forgery)</strong></p><p>攻击者利用HTTP请求会携带cookie的特定，利用用户的登陆状态发送恶意请求。</p><p>方法：自动发起get/post请求；诱导点击</p><p><strong>防御</strong>：</p><ul><li><p>CSRF token 验证</p></li><li><p>HTTP 请求头的 referer 字段（可以伪造），Origin(不含具体url)</p></li><li><p>SameSite 限制 Cookie 在跨站请求时不会被发送</p><ul><li>Strict，必须是相同站点</li><li>Lax 宽松，允许部分类型，比如 a链接</li><li>None 不限制</li></ul></li></ul><p><strong>XSS：跨站脚本(Cross Site Scripting)</strong></p><ul><li>存储型：将恶意代码存在服务器，请求含有恶意代码的页面。</li><li>反射型：构建含有恶意代码的url，服务器不存储，后端直接返回到页面。</li><li>DOM型：前端解析恶意代码执行，相比前两者，属于前端的漏洞。</li></ul><p><strong>防御</strong>：</p><ul><li><p>本质是防止恶意脚本的注入</p></li><li><p>存储型和反射性：改成纯前端渲染， 对输入内容进行转义和过滤</p></li><li><p>DOM型：谨慎 innerHTML/ v-html ，字符串做代码执行的 eval,Function</p></li><li><p>CSP 内容安全策略 Content-Security-Policy，白名单告诉浏览器认可的资源来源，http响应头/meta</p></li><li><p>很多XSS盗取是cookie的，可以设置Cookie 的 HttpOnly</p></li></ul><h3 id="浏览器存储" tabindex="-1">浏览器存储 <a class="header-anchor" href="#浏览器存储" aria-hidden="true">#</a></h3><p><strong>Cookie</strong>：4K，用于HTTP请求头，同源，每个域名Cookie数量不超过20个</p><ul><li>可设置有效期（Expires/Max-Age）</li><li>Domain/Path 定义了 Cookie 的作用域</li><li>Secure 标记为只能通过HTTPS发送</li><li>HttpOnly无法通过JS访问（ Document.cookie）</li><li>SameSite 限制Cookie 在跨站请求时不会被发送，同站：<strong>二级域名</strong></li><li>主要用于，会话状态管理，行为跟踪。</li><li>缺陷：空间小，网络请求会携带</li></ul><blockquote><p>操作：document.cookie 读取/或写入，写入是追加</p></blockquote><p><strong>LocalStorage/SessionStorage</strong>：5M</p><ul><li><p>浏览器提供的本地存储方法，同源策略，API简单</p></li><li><p>SessionStorage：当前窗口关闭就失效了，多个同源页面不共享</p></li><li><p>localStorage：永久保存，同源页面共享</p></li><li><p>缺点：空间小，只能存字符串</p></li></ul><blockquote><p>方法：setItem/getItem/removeItem/clear</p></blockquote><p><strong>IndexedDB</strong>：用于客户端存储大量结构化数据，采用键值存储，接近NoSQL数据库，同源策略，支持异步，支持事务，空间大（不少于250M）</p><h3 id="跨域问题" tabindex="-1">跨域问题 <a class="header-anchor" href="#跨域问题" aria-hidden="true">#</a></h3><p>同源策略：协议+域名+端口</p><p><strong>JSONP</strong></p><ul><li>前端构建一个全局函数的回调promise</li><li>服务端返回一个传入数据的调用函数的字符串</li></ul><blockquote><p>仅支持get，不安全</p></blockquote><p><strong>CORS</strong></p><p>跨域资源共享（CORS，Cross-Origin Resource Sharing）</p><p>在服务端允许跨域的情况下，通过HTTP响应头告诉浏览器当前请求允许跨域。</p><p>简单请求：</p><ul><li>请求方法为 <strong>GET</strong>、<strong>POST</strong>、<strong>HEAD</strong>。</li><li>请求头只能使用下面的字段： <ul><li>Accept</li><li>Accept-Language</li><li>Content-Type （只限于 text/plain、multipart/form-data、application/x-www-form-urlencoded）</li><li>Content-Language</li></ul></li></ul><p>任意一条要求不符合的即为非简单请求</p><ul><li>非简单请求会先发个预检请求（Preflight）</li></ul><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">简单请求：</span></span>
<span class="line"><span style="color:#A6ACCD;">请求头：Origin   响应头：Access-Control-Allow-Origin</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">- 预检请求</span></span>
<span class="line"><span style="color:#A6ACCD;">请求头：Method：OPTIONS  </span></span>
<span class="line"><span style="color:#A6ACCD;">Access-Control-Request-Headers:content-type</span></span>
<span class="line"><span style="color:#A6ACCD;">Access-Control-Request-Methods:POST</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">响应头:</span></span>
<span class="line"><span style="color:#A6ACCD;">Access-Control-Allow-Headers: content-type</span></span>
<span class="line"><span style="color:#A6ACCD;">Access-Control-Allow-Origin: *</span></span>
<span class="line"><span style="color:#A6ACCD;">Access-Control-Request-Methods: POST,GET,OPTIONS</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ul><li>CORS携带Cookie <ul><li>预检的响应头里要 Access-Control-Allow-Credentials: true</li><li>Access-Control-Allow-Origin 不能为空</li><li>在请求中设置 withCredentials</li></ul></li></ul><p><strong>代理转发</strong></p><ul><li>正向代理</li><li>反向代理</li></ul><h3 id="http状态码" tabindex="-1">HTTP状态码 <a class="header-anchor" href="#http状态码" aria-hidden="true">#</a></h3><ul><li><p>1××：中间状态</p><ul><li>101 Switching Protocols</li></ul></li><li><p>2××：成功</p><ul><li><p>200 OK</p></li><li><p>204 No Content：没有body 埋点上报</p></li><li><p>206 Partial Content</p></li></ul></li><li><p>3xx：重定向</p><ul><li><p>301 永久重定向</p></li><li><p>302 临时重定向 ；效果和301一样，只是语义不一样</p></li><li><p>304 缓存重定向 协商缓存验证</p></li></ul></li><li><p>4xx：客户端错误</p><ul><li><p>400 Bad Request：通用的错误码</p></li><li><p>401 unauthorized 未授权</p></li><li><p>403 Forbidden</p></li><li><p>404 Not Found</p></li><li><p>405 Method Not Allowed</p></li></ul></li><li><p>5xx：服务器错误</p><ul><li><p>500 Internal Server Error：通用的错误码</p></li><li><p>502 Bad Gateway：网关/代理错误</p></li><li><p>503 Service Unavailable</p></li></ul></li></ul><h3 id="缓存" tabindex="-1">缓存 <a class="header-anchor" href="#缓存" aria-hidden="true">#</a></h3><p>浏览器缓存：Service Worker / Memory Cache / Disk Cache / Push Cache</p><p>HTTP缓存：</p><p>强缓存：</p><ul><li><p>1.0 响应头 Expires</p></li><li><p>Pragma：nocache</p></li><li><p>1.1 Cache-Control： max-age；no-store/no-cache；private/public</p></li><li><p>没有缓存，浏览器会启发式缓存</p></li></ul><p>协商缓存：</p><ul><li>Last-modified - If-Modified-Since</li><li>Etag - If-None-Match</li></ul><h3 id="事件循环" tabindex="-1">事件循环 <a class="header-anchor" href="#事件循环" aria-hidden="true">#</a></h3><p>JS 是单线程的语言，只有一个执行栈，先执行当前任务，遇到异步事件就放入任务队列中，分为宏任务和微任务，当前宏任务执行完会处理所有的微任务，再从宏任务队列中取一个开始下一个宏任务。</p><ul><li>渲染是下一个宏任务执行前 <a href="https://zhuanlan.zhihu.com/p/78113300" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/78113300</a></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2022/png/338495/1654402275546-74fadbb4-590b-42cb-9079-9df66ae710ed.png" alt="image.png"></p><p>宏任务：script标签 / 交互事件</p><ul><li>setTimeout() / setInterval() /requestAnimationFrame() / <strong>Node</strong>: setImmediate（）</li></ul><p>微任务：</p><ul><li>Promise() / MutationObserver() / queueMicrotask() / <strong>Node</strong>: process.nextTick()</li></ul><p>Node:</p><ul><li>Node10 以后，每执行完一 个timers 类回调，例如 setTimeout ,setImmediate 之后，都会把微任务给执行掉（promise等）</li></ul><h3 id="浏览器进程" tabindex="-1">浏览器进程 <a class="header-anchor" href="#浏览器进程" aria-hidden="true">#</a></h3><ul><li>主进程</li><li><strong>渲染进程</strong><ul><li>GUI渲染线程 和JS引擎互斥</li><li>JS引擎</li><li>事件触发线程</li><li>定时器触发线程</li><li>异步HTTP请求线程</li></ul></li><li>GPU进程</li><li>网络进程</li><li>插件进程</li></ul><h3 id="从输入url到显示页面" tabindex="-1">从输入URL到显示页面 <a class="header-anchor" href="#从输入url到显示页面" aria-hidden="true">#</a></h3><ul><li><p>浏览器处理URL</p><ul><li>浏览器进程</li></ul></li><li><p>网络进程 发起请求</p><ul><li><p>检查缓存</p></li><li><p>DNS查找</p></li><li><p>HTTP(S) / TCP连接</p></li></ul></li><li><p>响应请求 渲染进程 渲染页面</p></li><li><p>关键渲染路径</p><ul><li>解析HTML和CSS分别生成DOM树和CSS规则树</li><li>组装成 render树，只添加可见的节点</li><li>布局 ：计算出 节点的布局信息（大小和位置）</li><li>通过布局树，进行分层生成图层树</li><li>为每个图层生成绘制列表，绘制节点的外观（颜色等）等</li><li>合成：将图层划分图块，光栅化（转位图），发送绘制命令浏览进程，渲染显示</li></ul></li></ul><h3 id="raf-ric" tabindex="-1">rAF/rIC <a class="header-anchor" href="#raf-ric" aria-hidden="true">#</a></h3><ul><li><code>requestAnimationFrame</code>：告诉浏览器在下一次绘制之前执行该回</li><li><code>requestIdleCallback</code>：在浏览器空闲的事件执行</li></ul><p><img src="https://www.yuque.com/api/filetransfer/images?url=http%3A%2F%2Fzhufengpeixun.com%2Fjg-vue%2Fassets%2Fimg%2Fframe.99c33aee.png&amp;sign=26fbeb015210d4a241e2400c683f4b5223c809174b5f7db41286c8560e4e11ad" alt="img"></p><p><img src="https://images.cubox.pro/1655882282065/10575/image.jpg" alt="img"></p></div></div></main><footer class="VPDocFooter" data-v-33f3cc82 data-v-afae0642><div class="edit-info" data-v-afae0642><!----><!----></div><!----></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"d48824f5\",\"one_browser.md\":\"93436061\",\"one_css.md\":\"aca6d54d\",\"one_js.md\":\"d28000e9\",\"two_other.md\":\"97d38ada\",\"two_vue.md\":\"daa22518\",\"two_webpack.md\":\"87cfcc42\"}")</script>
    <script type="module" async src="/assets/app.8f85f826.js"></script>
    
  </body>
</html>